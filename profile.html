<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <script src="js/amazon-cognito-identity.min.js"></script>
  <script src="js/config.js"></script>
  <script type="text/javascript" src="js/profile.js"></script>
  <link rel="stylesheet" href="js/autocomplete.css">
  <script type="text/javascript" src="js/autocomplete.js"></script>
  
  
</head>

<body>
  
  <!--Header -->
  <table  width="80%" style="border-spacing:20px; padding:10px; border:0; margin-left: auto; margin-right: auto">
    <tr> 
        <td width="300"  style="cursor:pointer;text-align:center;vertical-align: top;" onclick="window.location.href='./index.html'">
            <img src="img/logo.png" width="120">
            <h3> Nepean Allotment<br> Garden Association</h>
        </td>

        <td></td>

        <td width="200" style=" text-align: center">

          <div id='loader'><img src="img/loader.gif" width="20"></div>
          

          <!-- if user is signed in -->
          <div id="sign-out" style="display:none; text-align:center">
                  
            <div style="display:inline-block;color:#444;border:1px solid #CCC;background:#DDD;box-shadow: 0 0 5px -1px rgba(0,0,0,0.2);cursor:pointer;vertical-align:middle;max-width: 100px;padding: 5px;text-align: center;" onclick="window.location.href='./profile.html'"> 
                <img src="img/profile.png" width="50">
                <br><span id="member_name"></span>
            </div>

            <p><span id="member_email"></span><br>
            <a href="#" onclick="signOut();">Sign out</a></p>
          
          </div>
      

          <!--if user is signed out  -->
          <div id='sign-in' style="display:none">
            <form>
              <h2>Sign in</h2>
              <input type="text" id="inputUsername"  placeholder="Email address" name="username" required autofocus>
              <input type="password" id="inputPassword"  placeholder="Password" name="password" required>
              <p><button type="button" onclick="signInButton();">Sign in</button></p>
            </form>
        
            <p><i>Don't have an account? <a href="https://naga.auth.us-east-1.amazoncognito.com/signup?client_id=6mkmj7cfc7vd5g04cgm6lrm6ql&response_type=code&scope=aws.cognito.signin.user.admin+email+openid+phone+profile&redirect_uri=https://example.com">Become a member</a></i></p>

          </div>

        </td>
      </tr>
  </table>
  
  <br><br>

  <!-- Member console -->
  <table id="member_console" style="width:100%; margin-left: auto; margin-top: auto;" > <center>
    <tr><td width="300" valign="top">

    <!-- My Profile -->
    <div  style=" padding:10px;padding-top:0px;border: margin:10px; text-align:left; ">
      <h3>My profile</h3>
      Name:
      <br><input id="input_first_name" type="text" Placeholder="First Name" style="padding:10px; scroll-margin-top:5px;width:130px">
      <input id="input_last_name" type="text"  Placeholder="Last Name" style="padding:10px; margin-top:5px;width:130px"> 
      <br>    
      <input  id="input_email" type="text" style="display:none"></span>
      <br> Address:
      <br><input id="input_street_address" type="text" Placeholder="Street Address"  style="padding:10px; margin-top:5px; width:260px">
      <br><input id="input_city" type="text" style="padding:10px; margin-top:5px;width:170px" placeholder="City" value="Ottawa">
      <select id="input_province" style="padding:10px; margin-top:5px;width:80px"> <option value="AB">AB</option><option value="BC">BC</option><option value="MB">MB</option><option value="NB">NB</option><option value="NL">NL</option><option value="NS">NS</option><option value="ON" selected>ON</option><option value="PE">PE</option><option value="QC">QC</option><option value="SK">SK</option><option value="NT">NT</option><option value="NU">NU</option><option value="YT">YT</option></select>	
      <br><input id="input_postal_code" type="text" style="width:170px; padding:10px; margin-top:5px;" Placeholder="Postal Code">
      <br>
      <br> Phone Number:
      <br><input  id="input_phone_number" type="text" Placeholder="000-000-0000"  style="padding:10px; margin-top:5px; width:260px">
      <br>
      <br><input type="button" style="width:180px; "  onclick="update_profile();" value="Update"></center>
      <br>
    </div>

  </td><td valign="top">

    <!--My Plots -->
    <div  style=" padding:10px;padding-top:0px;  margin:10px;text-align:left;">
      <h3>My garden plots</h3>
      <table class="list" border="1" width=100% id="my_plots_table"></table>
      <br><br>
      <h3>Request a new plot</h3>
      Annual and perennial plots can take up to 3 years or more to get assigned. Raised beds are often available within a year or even mid-season. 
      You can have multiple plots, but you can only request one plot at the time. You will be informed by email when a plot has been assigned to you.
      <br><br><select id="request_plot_type"><option>Plot type</option><option>Any</option><option>Annual</option><option>Perennial</option>><option>Raised bed</option></select>
      <select id="request_plot_number"><option>Plot Number</option><option>Any</option><option>A01</option></select>
      <input type="button" onclick="add_to_waiting_list();" value="Submit">
  
    </div>
  </td></tr>
</table></center>

  <br><br><hr width:70%>


  <!--Admin Console -->
  <div id="admin_console" style="float:none;width:100%; background-color: lightgray;"><center>
    <br><br><h3>Admin </h3>Only users with administrator access can see this section
    <br><br>

    <!--All Members -->
    <div style="background-color:white;padding:10px;padding-top:0px; text-align:left; border:1px solid black; width:90%">
      <h3>All Members</h3>
      <table id="admin_members_table" class="list" ></table>
      <br>
      <h4>Add a member</h4>
      
        <table class="list">
          <tr>
            <td valign="top">
              Email:   
              <br><input id="admin_input_email" type="text" style="width:250px">
            </td>
            <td valign="top">
               Name:
              <br><input id="admin_input_first_name" type="text" Placeholder="First Name">
              <br><input id="admin_input_last_name" type="text"  Placeholder="Last Name"> 
             </td>
            <td valign="top">
              Address:
              <br><input id="admin_input_street_address" type="text" Placeholder="Street Address" >
              <br><input id="admin_input_city" type="text" placeholder="City" value="Ottawa">
              <select id="admin_input_province" style="width:80px"> <option value="AB">AB</option><option value="BC">BC</option><option value="MB">MB</option><option value="NB">NB</option><option value="NL">NL</option><option value="NS">NS</option><option value="ON" selected>ON</option><option value="PE">PE</option><option value="QC">QC</option><option value="SK">SK</option><option value="NT">NT</option><option value="NU">NU</option><option value="YT">YT</option></select>	
              <br><input id="admin_input_postal_code" type="text" Placeholder="Postal Code">
              
            </td valign="top">

            <td valign="top">
              Phone Number:
              <br><input  id="admin_input_phone_number" type="text" Placeholder="000-000-0000" >
              <br>
            </td>

            <td valign="top">
              <input type="button"  onclick="add_member();" value="Submit"></center>
            </td>
          </tr>
        </table>
      <br>
    
      
      <br>
    </div>

    
    <br><br>

    <!--All Plots -->
    <div style="background-color:white; padding:10px;padding-top:0px; text-align:left; border:1px solid black; width:90%">
      <h3>All Plots</h3>
      <table id="admin_plots_table" class="list"></table>

      <h4>Add a plot</h4>

      <input type="text" id="input_plotId"  placeholder="Plot ID" required>
      <select id="input_plot_type">
        <option>Plot type</option>
        <option>Annual</option>
        <option>Perennial</option>
        <option>Raised bed</option>
      </select>
      <input type="button" onclick="add_plot();" value="Add plot">

    </div>

    <br><br>

    <!--Waiting List -->
    <div style="background-color:white;padding:10px;padding-top:0px; text-align:left; border:1px solid black; width:90%">
      <h3> Waiting List</h3>
      <form>
        <select>
          <option>All</option>
          <option>Annual</option>
          <option>Perennial</option>
          <option>Raised bed</option>
        </select>
      </form>
      <p></p>
      <table id="admin_waiting_list_table" class="list" ></table>

      <h4>Add to waiting list</h4>

      <input type="text" id="admin_input_waiting_list_email"  placeholder="email" required>
      
      <select id="admin_input_waiting_list_plot_type">
        <option>Plot type</option>
        <option>Annual</option>
        <option>Perennial</option>
        <option>Raised bed</option>
      </select>
      <select id="admin_input_waiting_list_plot_number">
        <option>Plot Number</option>
        <option>A01</option>
        <option>P01</option>
        <option>R01</option>
      </select>
      <input type="button" onclick="add_plot();" value="Add plot">


    </div>
    <br><br><br><br>

  </div>

</body>

<script>
  window.onload = function(){
    
    getUserAttributes();
    get_naga_members();
    get_plots();
    get_waiting_list()
  }
</script>
<script type="text/javascript" src="js/admin.js"></script>
</html>