<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <script src="js/amazon-cognito-identity.min.js"></script>
  <script src="js/config.js"></script>
  <script type="text/javascript" src="js/profile.js"></script>
  <link rel="stylesheet" href="js/autocomplete.css">
  <script type="text/javascript" src="js/autocomplete.js"></script>
  
  
</head>

<body>
  
  <!--Header -->
  <table style="width:600px; border-spacing:20px; padding:10px; margin-left: auto; margin-right: auto">
    <tr> 
        <td style="cursor:pointer;" onclick="window.location.href='./index.html'">
            <img src="img/logo.png" width="150">
        </td>

        <td valign="bottom">
          <h1> Nepean Allotment<br> Garden Association</h1>
        </td>
      </tr>
  </table>
  
  <br><br>

  <!-- Member console -->
  <table id="member_console" style="width:90%; margin-left: auto; margin-right: auto;" ><tr>
    <td width="300" valign="top">
      
      <!-- My Profile -->
      <div  style="width:350px; padding:10px;padding-top:0px;border-right:1px solid lightgrey; margin:10px; text-align:left; ">
        <h3>My profile</h3>
        <table style="width:100%;"><tr>
          <td >
            <!-- if user is signed in -->
            <div id='loader'><img src="img/loader.gif" width="20"></div>
            <div id="sign-out" style="display:none; text-align:center">
              <div style="cursor:pointer; margin:5px;" onclick="window.location.href='./profile.html'"> 
                  <img src="img/profile.png" width="60">
              </div>
            </div>
          </td>
          <td>
            <br><input id="input_first_name" type="text" Placeholder="First Name" style="padding:10px; scroll-margin-top:5px;width:90%">
            <input id="input_last_name" type="text"  Placeholder="Last Name" style="padding:10px; margin-top:5px;width:90%"> 
          </td>
        </tr></table>
        <br><b>Email:</b> 
        <br><span id="member_email"></span>
        <br><input  id="input_email" type="text" style="display:none"></span>
        <br> <b>Mailing address:</b>
        <br><input id="input_street_address" type="text" Placeholder="Street Address"  style="padding:10px; margin-top:5px; width:260px">
        <br><input id="input_city" type="text" style="padding:10px; margin-top:5px;width:170px" placeholder="City" value="Ottawa">
        <select id="input_province" style="padding:10px; margin-top:5px;width:80px"> <option value="AB">AB</option><option value="BC">BC</option><option value="MB">MB</option><option value="NB">NB</option><option value="NL">NL</option><option value="NS">NS</option><option value="ON" selected>ON</option><option value="PE">PE</option><option value="QC">QC</option><option value="SK">SK</option><option value="NT">NT</option><option value="NU">NU</option><option value="YT">YT</option></select>	
        <br><input id="input_postal_code" type="text" style="width:170px; padding:10px; margin-top:5px;" Placeholder="Postal Code">
        <br>
        <br> <b>Phone Number:</b>
        <br><input  id="input_phone_number" type="text" Placeholder="000-000-0000"  style="padding:10px; margin-top:5px; width:260px">
        <br>
        <br><input type="button" onclick="update_profile();" value="Update"> <input type="button" onclick="signOut();" value="Sign out" style="background-color:tomato">
      
        <br>
      </div>
    </td>
    
    <td valign="top">

      <!--My Plots -->
      <div style="padding:10px;padding-top:0px;  margin:10px;">
        <h3>My garden plots</h3>
        <table class="list" id="my_plots_table"></table>
        
        <br><br>
      </div>

        <!--Request new plot -->
      <div id="request_plot_container" style="padding:10px;padding-top:0px;  margin:10px; display:none">
        <h3>Request a new plot</h3>
        Raised beds are often available within a year or even mid-season.
        Annuals take an average of 2+ years.
        Perennials are only available to existing members, and they take an average of 3+ years.
        Preference is given to existing members on all plots.
        
        <br>
        <br><select id="request_plot_type">
          <option>Raised bed</option>
          <option>Annual</option>
          <option id='perennial_option' disabled>Perennial</option></select>

          <select onchange="request_plot_number(this.value)"><option>First available</option><option value="1">I have a plot in mind</option></select>


        <input type="text" id="request_plot_number" style="display:none" placeholder="Which plot(s)?">
        <input type="button" onclick="add_to_waiting_list();" value="Submit">
      </div>

      <!--My Waiting list -->
      <div id="my_waiting_list_container" style="padding:10px;padding-top:0px;  margin:10px; display:none">
        <h3>Waiting list</h3>
        <table class="list"  width=100% id="my_waiting_list_table"></table>
        
      </div>
    </td>
  </tr></table>

  

  <br><br>
  
  <div style="width:90%; margin-left: auto; margin-right: auto; ">
    <h3>Admin </h3>Only users with administrator access can see this section
  </div>
  <br><br>
  
  <!--Admin Console -->
  <div id="admin_console" style=" min-height: 1000px; width:90%; margin-left: auto; margin-right: auto; background-color:#ccc;">
   

    <div class="tab">
      <button class="tablinks" onclick="openCity(event, 'members_container');get_naga_members();">Members</button>
      <button class="tablinks" onclick="openCity(event, 'plots_container');get_plots();">Plots</button>
      <button class="tablinks" onclick="openCity(event, 'waiting_list_container');get_waiting_list()" id="defaultTab">Waiting List</button>
    </div>
    

    <!--All Members -->
    <div  id='members_container' class="tabcontent">
      
      <div id="add_member_container">
        <br><b>Add a member</b><br><br>
        <table>
          <tr>
            <td valign="top">
              <input id="admin_input_email" type="text" placeholder="Email address">
              <br><input id="admin_input_first_name" type="text" Placeholder="First Name">
              <br><input id="admin_input_last_name" type="text"  Placeholder="Last Name"> 
              
             </td>
            <td valign="top">
              <input id="admin_input_street_address" type="text" Placeholder="Street Address" style="width:200px" >
              <br><input id="admin_input_city" type="text" placeholder="City" value="Ottawa" style="width:100px" >
              <select id="admin_input_province" style="width:80px"> <option value="AB">AB</option><option value="BC">BC</option><option value="MB">MB</option><option value="NB">NB</option><option value="NL">NL</option><option value="NS">NS</option><option value="ON" selected>ON</option><option value="PE">PE</option><option value="QC">QC</option><option value="SK">SK</option><option value="NT">NT</option><option value="NU">NU</option><option value="YT">YT</option></select>	
              <br><input id="admin_input_postal_code" type="text" Placeholder="Postal Code" style="width:100px" >
              
            </td><td valign="top">
              <input  id="admin_input_phone_number" type="text" Placeholder="Phone number" >
              <br><br><input id="admin_input_admin_checkbox" type="checkbox"> Admin user
              <br><br><input type="button"  onclick="add_member();" value="Submit">              
            </td>

          </tr>
        </table>
      </div>
        <br><br>
        <table id="admin_members_table" class="list" ></table>
    </div>


    <!--All Plots -->
    <div id="plots_container"  class="tabcontent">
      <br><b>Add a plot</b><br>
      <br><input type="text" id="input_plotId"  placeholder="Plot ID" required>
      <select id="input_plot_type">
        <option>Plot type</option>
        <option>Annual</option>
        <option>Perennial</option>
        <option>Raised bed</option>
      </select>
      <input type="button" onclick="add_plot();" value="Add plot">
      <br><br><table id="admin_plots_table" class="list"></table>

    </div>

    <!--Waiting List -->
    <div id="waiting_list_container" class="tabcontent">
      <br><b>Add to waiting list</b><br>
      <br><input type="text" id="admin_input_waiting_list_email"  placeholder="Email address" required>
      <select id="admin_input_waiting_list_plot_type">
        <option>Plot type</option>
        <option>Annual</option>
        <option>Perennial</option>
        <option>Raised bed</option>
      </select>
      <select id="admin_input_waiting_list_plot_number">
        <option>Plot Number</option>
        <option>A01</option>
        <option>P01</option>
        <option>R01</option>
      </select>
      <input type="button" onclick="add_plot();" value="Add plot">
      <br><br><div id="waiting_list"></div>

    

    </div>
    

  </div>

</body>

<script>
  window.onload = function(){
    
    getUserAttributes();
    document.getElementById("defaultTab").click();
  }
</script>
<script type="text/javascript" src="js/admin.js"></script>
</html>